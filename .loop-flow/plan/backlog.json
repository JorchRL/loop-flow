{
  "project": "Loop-Flow MCP Server",
  "last_updated": "2026-01-18",
  "notes": "LF-021 complete: Renamed .loop-flow/AGENTS.md to WORKFLOW.md. Bumped to v0.4.0.",
  "tasks": [
    {
      "id": "LF-021",
      "title": "[IMPL] Rename .loop-flow/AGENTS.md to WORKFLOW.md",
      "description": "Rename the Loop-Flow workflow rules file from AGENTS.md to WORKFLOW.md to avoid ambiguity with the repo's root AGENTS.md. The root AGENTS.md contains repo-specific agent rules and just points to Loop-Flow; WORKFLOW.md contains the actual Loop-Flow methodology.",
      "status": "DONE",
      "priority": "medium",
      "acceptance_criteria": [
        "Rename .loop-flow/AGENTS.md to .loop-flow/WORKFLOW.md",
        "Update LOOP-FLOW-SETUP.md template and instructions",
        "Update root AGENTS.md append instruction to point to WORKFLOW.md",
        "Update any references in docs (DESIGN.md, etc.)",
        "Bump to v0.4.0"
      ],
      "notes": "Clarity improvement: root AGENTS.md = repo rules + 'read Loop-Flow', WORKFLOW.md = Loop-Flow methodology. Two AGENTS.md files is confusing."
    },
    {
      "id": "LF-020",
      "title": "[IMPL] Unified Versioned Setup File",
      "description": "Merge LOOP-FLOW-BOOTSTRAP.md and LOOP-FLOW-UPDATE.md into single LOOP-FLOW-SETUP.md that auto-detects whether to bootstrap or update.",
      "status": "DONE",
      "priority": "high",
      "acceptance_criteria": [
        "Single file works for both fresh install and update",
        "Auto-detect based on .loop-flow/ existence",
        "Version number at top of file",
        "Full changelog in VERSION HISTORY section",
        "Process insights tagged with loop-flow-core for methodology updates",
        "Delete old LOOP-FLOW-BOOTSTRAP.md and LOOP-FLOW-UPDATE.md"
      ],
      "notes": "v0.3.0 - Emerged from discussion about distribution simplicity. See INS-028 (LF-PROC-006)."
    },
    {
      "id": "LF-001.6",
      "title": "[IMPL] Self-Contained Bootstrap File",
      "description": "Create LOOP-FLOW-BOOTSTRAP.md that teammates can drop into any repo to scaffold Loop-Flow. Should be self-contained with all templates and instructions.",
      "status": "DONE",
      "priority": "high",
      "acceptance_criteria": [
        "Rename .agents to .loop-flow across repo",
        "Update all doc references",
        "Create LOOP-FLOW-BOOTSTRAP.md with full templates",
        "Include all task types, modes, insight protocol",
        "User tutorial section",
        "Agent can scaffold from this file alone"
      ],
      "notes": "Key insight: terseness in bootstrap files is pre-emptive context rot. Completeness > brevity for one-time-use files. See INS-014. SUPERSEDED by LF-020."
    },
    {
      "id": "LF-001.5",
      "title": "[DESIGN] Domain Model Analysis",
      "description": "Analyze and refine Loop-Flow's domain model before implementation. Review current file-based workflow (backlog.json, progress.txt) and identify improvements to entities, relationships, and semantics.",
      "status": "DONE",
      "priority": "high",
      "acceptance_criteria": [
        "Review current entities: Task, Session, Learning, Repo",
        "Identify missing concepts or redundancies",
        "Define clear entity relationships and lifecycles",
        "Consider edge cases from real usage",
        "Update DESIGN.md with refined data model"
      ],
      "notes": "Completed via Socratic discussion. Key outcomes: Learning as zettelkasten (linked knowledge graph), leverage hierarchy for insight types, quick capture vs deep synthesis modes, insights.json file created."
    },
    {
      "id": "LF-000",
      "title": "[DESIGN] Project Bootstrap & Documentation",
      "description": "Design session to create Loop-Flow project structure, architecture, and user documentation.",
      "status": "DONE",
      "priority": "high",
      "acceptance_criteria": [
        "Project structure created",
        "DESIGN.md with architecture",
        "AGENTS.md with complete rules",
        "README.md user manual",
        "SCAFFOLD.md setup guide",
        "Initial backlog with tasks"
      ],
      "notes": "Completed in PROTOTYPE repo, then transitioned here. See progress.txt for details."
    },
    {
      "id": "LF-001",
      "title": "[SPIKE] Research MCP Protocol",
      "description": "Understand how MCP servers work: protocol, transport (stdio vs HTTP), how Claude Code discovers/connects to them, SDK usage.",
      "status": "IN_PROGRESS",
      "priority": "high",
      "depends_on": ["LF-001.5"],
      "acceptance_criteria": [
        "Understand MCP message format",
        "Know how to register tools with Claude Code",
        "Have working hello-world MCP server",
        "Document findings in docs/MCP-RESEARCH.md"
      ],
      "notes": "Start with Anthropic docs and @anthropic-ai/mcp SDK. Check Claude Code docs for server registration. Session 3 progress: understood architecture, primitives, transports. Still need: Claude Code registration, hello-world server, MCP-RESEARCH.md."
    },
    {
      "id": "LF-001.7",
      "title": "[LEARN] Complete MCP Research",
      "description": "Continue MCP learning from Session 3. Remaining: figure out Claude Code server registration, build hello-world MCP server, document findings.",
      "status": "TODO",
      "priority": "high",
      "depends_on": ["LF-001"],
      "acceptance_criteria": [
        "Understand Claude Code MCP server registration config",
        "Build and test hello-world MCP server",
        "Document all findings in docs/MCP-RESEARCH.md"
      ],
      "notes": "Continuation of LF-001. See Session 3 progress for context. Consider this the 'implementation' half of the research."
    },
    {
      "id": "LF-002",
      "title": "[IMPL] Set up TypeScript project",
      "description": "Initialize npm package with TypeScript, ESLint, Vitest, proper tsconfig.",
      "status": "TODO",
      "priority": "high",
      "depends_on": ["LF-001"],
      "acceptance_criteria": [
        "package.json with proper scripts",
        "tsconfig.json with strict mode",
        "ESLint configured",
        "Vitest for testing",
        "src/ structure matches design"
      ]
    },
    {
      "id": "LF-003",
      "title": "[IMPL] SQLite schema and migrations",
      "description": "Implement database schema for repos, tasks, sessions, learnings. Use better-sqlite3.",
      "status": "TODO",
      "priority": "high",
      "depends_on": ["LF-002"],
      "acceptance_criteria": [
        "Schema matches DESIGN.md data model",
        "Migration system (even if simple)",
        "CRUD functions for each entity",
        "Tests for database operations"
      ]
    },
    {
      "id": "LF-004",
      "title": "[IMPL] Basic CLI (init, status)",
      "description": "Implement CLI entry point with commander. Start with init and status commands.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-003"],
      "acceptance_criteria": [
        "loop-flow init creates ~/.loop-flow/ and registers repo",
        "loop-flow status shows current repo and active task",
        "Proper error handling and help text"
      ]
    },
    {
      "id": "LF-005",
      "title": "[IMPL] MCP server skeleton",
      "description": "Implement MCP server that registers with Claude Code. Start with a simple echo tool.",
      "status": "TODO",
      "priority": "high",
      "depends_on": ["LF-001", "LF-002"],
      "acceptance_criteria": [
        "MCP server starts via CLI",
        "Registers with Claude Code (or can be manually added)",
        "Has one working tool (echo or ping)",
        "Proper error handling"
      ]
    },
    {
      "id": "LF-006",
      "title": "[IMPL] loop.start and loop.end tools",
      "description": "Core MCP tools for session management. Returns focused context, records outcomes.",
      "status": "TODO",
      "priority": "high",
      "depends_on": ["LF-003", "LF-005"],
      "acceptance_criteria": [
        "loop.start returns repo info, suggested task, recent learnings",
        "loop.end records session, updates task, saves learnings",
        "Context is minimal (token-efficient)",
        "Tests for both tools"
      ]
    },
    {
      "id": "LF-007",
      "title": "[IMPL] task.* MCP tools",
      "description": "Task management tools: add, update, list, get.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-006"],
      "acceptance_criteria": [
        "task.add creates new task",
        "task.update modifies task",
        "task.list with filters",
        "task.get with related context"
      ]
    },
    {
      "id": "LF-008",
      "title": "[IMPL] learning.* MCP tools",
      "description": "Learning management tools: add, search, related.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-006"],
      "acceptance_criteria": [
        "learning.add records learning with type/tags",
        "learning.search with full-text search",
        "learning.related finds relevant learnings"
      ]
    },
    {
      "id": "LF-009",
      "title": "[IMPL] Migration from file-based workflow",
      "description": "CLI command and MCP tool to migrate backlog.json and progress.txt to SQLite.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-003", "LF-004"],
      "acceptance_criteria": [
        "Parses backlog.json format",
        "Parses progress.txt format (including learnings)",
        "Imports to SQLite preserving relationships",
        "Reports import stats"
      ]
    },
    {
      "id": "LF-010",
      "title": "[IMPL] Export commands",
      "description": "Export backlog and progress to human-readable formats.",
      "status": "TODO",
      "priority": "low",
      "depends_on": ["LF-007", "LF-008"],
      "acceptance_criteria": [
        "Export to JSON",
        "Export to Markdown",
        "CLI commands and MCP tools"
      ]
    },
    {
      "id": "LF-011",
      "title": "[IMPL] Multi-repo support",
      "description": "Support multiple repos from single Loop-Flow instance.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-006"],
      "acceptance_criteria": [
        "repo.init registers new repo",
        "repo.list shows all repos",
        "repo.switch changes active repo",
        "Cross-repo learning search"
      ]
    },
    {
      "id": "LF-012",
      "title": "[IMPL] Templates system",
      "description": "Template system for scaffolding AGENTS.md files.",
      "status": "TODO",
      "priority": "low",
      "depends_on": ["LF-004"],
      "acceptance_criteria": [
        "Generic template",
        "Next.js template",
        "Python template",
        "Template selection in init command"
      ]
    },
    {
      "id": "LF-013",
      "title": "[DESIGN] Team sync protocol",
      "description": "Design how learnings and tasks could be shared across team members.",
      "status": "TODO",
      "priority": "low",
      "notes": "Future feature. Pin for consideration."
    },
    {
      "id": "LF-014",
      "title": "[IMPL] Local dashboard UI",
      "description": "Web-based dashboard at localhost for viewing tasks, learnings, progress.",
      "status": "TODO",
      "priority": "low",
      "depends_on": ["LF-007", "LF-008"],
      "notes": "Future feature. Consider React + Vite or simple HTML."
    },
    {
      "id": "LF-015",
      "title": "[DESIGN] Knowledge Abstraction & Context Scaling",
      "description": "Design how learnings scale as they accumulate. Explore abstraction: many concrete insights synthesize into fewer abstract principles. Concrete insights archive, abstract ones load by default.",
      "status": "TODO",
      "priority": "low",
      "notes": "Deferred until we hit the scaling problem. Key insight: knowledge compounds through abstraction, mirroring how humans learn. See INS-005."
    },
    {
      "id": "LF-016",
      "title": "[IMPL] learning.capture quick mode",
      "description": "Implement quick capture for insights that auto-schedules [DISCUSS] task. Minimal context spent during capture.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-008"],
      "acceptance_criteria": [
        "learning.capture takes minimal input",
        "Auto-creates [DISCUSS] task",
        "Marks insight as unprocessed",
        "Returns immediately to minimize context use"
      ]
    },
    {
      "id": "LF-017",
      "title": "[DESIGN] Context Intelligence Subsystem",
      "description": "Design the knowledge retrieval architecture: domain knowledge index (llms.txt-style), two-tier curation (embeddings + LLM judgment), lazy loading, MCP Resources for context. This is how Loop-Flow manages what context to surface without polluting the main agent's window.",
      "status": "TODO",
      "priority": "medium",
      "depends_on": ["LF-001"],
      "acceptance_criteria": [
        "Define domain knowledge index schema (links, summaries, embeddings)",
        "Design two-tier curation flow (vector recall → LLM selection)",
        "Decide: subagent vs MCP sampling for LLM curation",
        "Map to MCP primitives (which are Tools vs Resources)",
        "Document in docs/CONTEXT-INTELLIGENCE.md"
      ],
      "notes": "Emerged from LF-001 research session. See INS-022, INS-023, INS-024. Key insight: Loop-Flow isn't just storing knowledge — it's a knowledge retrieval system with real architecture."
    },
    {
      "id": "LF-018",
      "title": "[IMPL] Loop-Flow Update Mechanism",
      "description": "Create a document/file that lets an agent update a local file-based Loop-Flow installation to the latest process knowledge. Like LOOP-FLOW-BOOTSTRAP.md but for upgrades. Should include updated AGENTS.md content, new modes/task types, and selected process insights.",
      "status": "DONE",
      "priority": "medium",
      "acceptance_criteria": [
        "Create LOOP-FLOW-UPDATE.md (or similar) with update instructions for agents",
        "Include latest AGENTS.md template content",
        "Include selected process insights (filter by type=process, relevant to workflow)",
        "Agent can apply update to any file-based Loop-Flow installation",
        "Document what gets updated vs what stays (project state preserved)"
      ],
      "notes": "Enables propagating workflow improvements to other projects using file-based Loop-Flow. SUPERSEDED by LF-020 (unified setup file)."
    },
    {
      "id": "LF-019",
      "title": "[DESIGN] Loop-Flow Versioning Scheme",
      "description": "Design how to version Loop-Flow's process knowledge. Should enable: knowing what version a project is on, diffing between versions, changelogs, upgrade paths.",
      "status": "TODO",
      "priority": "low",
      "depends_on": ["LF-018"],
      "acceptance_criteria": [
        "Version scheme defined (semver? date-based?)",
        "Where version is stored in file-based installations",
        "How to generate changelog between versions",
        "How update mechanism uses version info"
      ],
      "notes": "Deferred. Figure out update mechanism first, then add versioning."
    }
  ]
}
